import{a as oe,b as ne,c as ae}from"./chunk-WH5CCBXP.js";import{a as M}from"./chunk-Z24TDD3R.js";import{b as L,c,d as B,e as k,h as N,j as P,k as A,l as R,n as D}from"./chunk-OYNSWCUO.js";import{a as j}from"./chunk-OMGKDOXE.js";import{a as pe}from"./chunk-7QLNNFJM.js";import{c as K,e as y,g as E,i as Q,j as T,k as W,l as X,o as Y,p as ee,q as te,r as ie,t as S,u as re}from"./chunk-XJFT56VC.js";import{$a as u,Cb as J,Da as h,Ha as C,Ma as g,P as $,Sa as m,U as F,V as O,X as Z,Za as t,_a as a,fb as x,ob as d,pb as b,qb as f,wb as p,xb as l,ya as r}from"./chunk-IDPMWJG7.js";function ge(e,n){e&1&&(t(0,"div",16),d(1),p(2,"translate"),a()),e&2&&(r(),f(" ",l(2,1,"auth.usernameError")," "))}function he(e,n){e&1&&(t(0,"div",16),d(1),p(2,"translate"),a()),e&2&&(r(),f(" ",l(2,1,"auth.emailError")," "))}function ve(e,n){e&1&&(t(0,"div",16),d(1),p(2,"translate"),a()),e&2&&(r(),f(" ",l(2,1,"auth.passwordError")," "))}function be(e,n){e&1&&(t(0,"div",16),d(1),p(2,"translate"),a()),e&2&&(r(),f(" ",l(2,1,"auth.phoneError")," "))}function Ce(e,n){e&1&&(t(0,"div",16),d(1),p(2,"translate"),a()),e&2&&(r(),f(" ",l(2,1,"auth.rucError")," "))}var V=class e{constructor(n,o){this.fb=n;this.userService=o;this.form=this.fb.group({username:["",[c.required,c.minLength(3)]],email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],phone:["",[c.required,c.minLength(9)]],rucEnterprise:["",[c.required,c.minLength(11)]]})}form;submitting=!1;errorMessage=null;registeredUserId=null;onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.submitting=!0,this.errorMessage=null;let n=this.form.value;this.userService.register({username:n.username,email:n.email,password:n.password,phone:n.phone,rucEnterprise:n.rucEnterprise}).subscribe({next:o=>{console.log("\u2705 Registro exitoso:",o),this.registeredUserId=o.userId,this.submitting=!1},error:o=>{console.error("\u274C Error en el registro:",o),this.errorMessage="Ocurri\xF3 un error durante el registro. Intenta nuevamente.",this.submitting=!1}})}static \u0275fac=function(o){return new(o||e)(h(R),h(M))};static \u0275cmp=C({type:e,selectors:[["app-register-form"]],decls:50,vars:42,consts:[[1,"form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],[1,"input-wrapper"],["id","username","type","text","formControlName","username",3,"placeholder"],[1,"alert-error","alert-error-left"],["class","error-floating",4,"ngIf"],["for","email"],["id","email","type","email","formControlName","email",3,"placeholder"],["for","password"],["id","password","type","password","formControlName","password",3,"placeholder"],["for","phone"],["id","phone","type","tel","formControlName","phone",3,"placeholder"],["for","rucEnterprise"],["id","rucEnterprise","type","text","formControlName","rucEnterprise",3,"placeholder"],["type","submit",1,"form-submit-btn",3,"disabled"],[1,"error-floating"]],template:function(o,i){if(o&1&&(t(0,"form",0),x("ngSubmit",function(){return i.onSubmit()}),t(1,"div",1)(2,"label",2),d(3),p(4,"translate"),a(),t(5,"div",3),u(6,"input",4),p(7,"translate"),t(8,"div",5),g(9,ge,3,3,"div",6),a()()(),t(10,"div",1)(11,"label",7),d(12),p(13,"translate"),a(),t(14,"div",3),u(15,"input",8),p(16,"translate"),t(17,"div",5),g(18,he,3,3,"div",6),a()()(),t(19,"div",1)(20,"label",9),d(21),p(22,"translate"),a(),t(23,"div",3),u(24,"input",10),p(25,"translate"),t(26,"div",5),g(27,ve,3,3,"div",6),a()()(),t(28,"div",1)(29,"label",11),d(30),p(31,"translate"),a(),t(32,"div",3),u(33,"input",12),p(34,"translate"),t(35,"div",5),g(36,be,3,3,"div",6),a()()(),t(37,"div",1)(38,"label",13),d(39),p(40,"translate"),a(),t(41,"div",3),u(42,"input",14),p(43,"translate"),t(44,"div",5),g(45,Ce,3,3,"div",6),a()()(),t(46,"button",15),d(47),p(48,"translate"),p(49,"translate"),a()()),o&2){let s,v,_,w,I;m("formGroup",i.form),r(3),b(l(4,18,"auth.usernameLabel")),r(3),m("placeholder",l(7,20,"auth.usernamePlaceholder")),r(3),m("ngIf",((s=i.form.get("username"))==null?null:s.touched)&&((s=i.form.get("username"))==null?null:s.invalid)),r(3),b(l(13,22,"auth.emailLabel")),r(3),m("placeholder",l(16,24,"auth.emailPlaceholder")),r(3),m("ngIf",((v=i.form.get("email"))==null?null:v.touched)&&((v=i.form.get("email"))==null?null:v.invalid)),r(3),b(l(22,26,"auth.passwordLabel")),r(3),m("placeholder",l(25,28,"auth.passwordPlaceholder")),r(3),m("ngIf",((_=i.form.get("password"))==null?null:_.touched)&&((_=i.form.get("password"))==null?null:_.invalid)),r(3),b(l(31,30,"auth.phoneLabel")),r(3),m("placeholder",l(34,32,"auth.phonePlaceholder")),r(3),m("ngIf",((w=i.form.get("phone"))==null?null:w.touched)&&((w=i.form.get("phone"))==null?null:w.invalid)),r(3),b(l(40,34,"auth.rucLabel")),r(3),m("placeholder",l(43,36,"auth.rucPlaceholder")),r(3),m("ngIf",((I=i.form.get("rucEnterprise"))==null?null:I.touched)&&((I=i.form.get("rucEnterprise"))==null?null:I.invalid)),r(),m("disabled",i.submitting),r(),f(" ",i.submitting?l(48,38,"auth.registering"):l(49,40,"auth.register")," ")}},dependencies:[E,y,D,N,L,B,k,P,A,S],encapsulation:2})};function xe(e,n){e&1&&(t(0,"div",10),d(1),p(2,"translate"),a()),e&2&&(r(),f(" ",l(2,1,"auth.emailError")," "))}function ye(e,n){e&1&&(t(0,"div",10),d(1),p(2,"translate"),a()),e&2&&(r(),f(" ",l(2,1,"auth.passwordError")," "))}var H=class e{constructor(n,o,i,s){this.fb=n;this.authService=o;this.userService=i;this.router=s;this.form=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(1)]]})}form;errorMessage=null;loading=!1;onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0;let n=this.form.value;this.userService.login(n).subscribe({next:o=>{let{token:i,id:s}=o;this.authService.saveToken(i),this.authService.saveUserId(s),console.log("\u2705 Token y userId guardados:",i,s),this.loading=!1,this.router.navigate(["/main"])},error:o=>{console.error("\u274C Error al iniciar sesi\xF3n:",o),this.errorMessage="Credenciales incorrectas o error del servidor.",this.loading=!1}})}static \u0275fac=function(o){return new(o||e)(h(R),h(j),h(M),h(ee))};static \u0275cmp=C({type:e,selectors:[["app-login-form"]],decls:22,vars:18,consts:[[1,"form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],[1,"input-wrapper"],["id","email","type","email","formControlName","email",3,"placeholder"],[1,"alert-error","alert-error-right"],["class","error-floating",4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password",3,"placeholder"],["type","submit",1,"form-submit-btn"],[1,"error-floating"]],template:function(o,i){if(o&1&&(t(0,"form",0),x("ngSubmit",function(){return i.onSubmit()}),t(1,"div",1)(2,"label",2),d(3),p(4,"translate"),a(),t(5,"div",3),u(6,"input",4),p(7,"translate"),t(8,"div",5),g(9,xe,3,3,"div",6),a()()(),t(10,"div",1)(11,"label",7),d(12),p(13,"translate"),a(),t(14,"div",3),u(15,"input",8),p(16,"translate"),t(17,"div",5),g(18,ye,3,3,"div",6),a()()(),t(19,"button",9),d(20),p(21,"translate"),a()()),o&2){let s,v;m("formGroup",i.form),r(3),b(l(4,8,"auth.emailLabel")),r(3),m("placeholder",l(7,10,"auth.emailPlaceholder")),r(3),m("ngIf",((s=i.form.get("email"))==null?null:s.touched)&&((s=i.form.get("email"))==null?null:s.invalid)),r(3),b(l(13,12,"auth.passwordLabel")),r(3),m("placeholder",l(16,14,"auth.passwordPlaceholder")),r(3),m("ngIf",((v=i.form.get("password"))==null?null:v.touched)&&((v=i.form.get("password"))==null?null:v.invalid)),r(2),f(" ",l(21,16,"auth.login")," ")}},dependencies:[E,y,D,N,L,B,k,P,A,S],encapsulation:2})};function Se(e,n){e&1&&u(0,"app-register-form",9)}function _e(e,n){e&1&&u(0,"app-login-form",10)}var q=class e{constructor(n){this.themeService=n;let o=document.documentElement.classList.contains("dark-mode");this.logoSrc=o?"/assets/logo-dark-mode.png":"/assets/logo-light-mode.png"}currentView=null;setView(n){this.currentView=n}logoSrc="";static \u0275fac=function(o){return new(o||e)(h(oe))};static \u0275cmp=C({type:e,selectors:[["app-auth-layout"]],decls:16,vars:9,consts:[[1,"auth-main-container"],[1,"logo-container",3,"ngClass"],["src","/assets/img/logo-dark-mode.png","alt","Logo Dark",1,"logo","logo-dark"],[1,"form-container"],["class","form-popup register-form",4,"ngIf"],["class","form-popup login-form",4,"ngIf"],[1,"accessibility-buttons"],[1,"authentication-buttons"],["size","large",3,"click"],[1,"form-popup","register-form"],[1,"form-popup","login-form"]],template:function(o,i){o&1&&(t(0,"main",0)(1,"div",1),u(2,"img",2),a(),t(3,"div",3),g(4,Se,1,0,"app-register-form",4)(5,_e,1,0,"app-login-form",5),a(),t(6,"div",6),u(7,"app-theme-toggle")(8,"app-language-switcher"),a(),t(9,"div",7)(10,"app-classic-button",8),x("click",function(){return i.setView("register")}),d(11),p(12,"translate"),a(),t(13,"app-classic-button",8),x("click",function(){return i.setView("login")}),d(14),p(15,"translate"),a()()()),o&2&&(r(),m("ngClass",i.currentView),r(3),m("ngIf",i.currentView==="register"),r(),m("ngIf",i.currentView==="login"),r(6),f(" ",l(12,5,"auth.register")," "),r(3),f(" ",l(15,7,"auth.login")," "))},dependencies:[V,H,y,K,ne,ae,pe,S],styles:[`body{display:flex;justify-content:center;align-items:center}.auth-main-container{width:80rem;height:45rem;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:1rem;position:relative}.logo-container{width:20rem;height:20rem;transition:transform .5s ease;position:absolute;top:12rem;left:calc(50% - 10rem)}.logo{width:100%}.logo-container.register{transform:translate(16.8rem)}.logo-container.login{transform:translate(-16.8rem)}.form-container{position:relative;height:100%;width:60%}.form-popup{position:absolute;animation:popup .6s ease-out;max-width:300px;background-color:var(--color-primary);color:var(--color-pure);padding:32px 24px;font-size:14px;display:flex;flex-direction:column;gap:20px;border-radius:10px;box-shadow:0 0 3px #00000015,0 2px 3px #0000002b}.register-form{left:0;bottom:-5em}.login-form{right:0;bottom:2em}@keyframes popup{0%{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}.form-popup button:active{scale:.95}.form-popup .title-container{text-align:center;font-weight:600;font-size:18px}.form-popup .form{display:flex;flex-direction:column;gap:.2rem}.form-popup .form-group{display:flex;position:relative;flex-direction:column;gap:2px;background-color:var(--color-primary);color:var(--color-pure)}.form-popup .input-wrapper{position:relative;display:flex;align-items:center}.form-popup .form-group label{display:block;margin-bottom:5px}.form-popup .form-group input{width:100%;padding:12px 16px;border-radius:6px;border:1px solid #ccc}.alert-error{position:absolute}.alert-error-left{left:-10.5rem}.alert-error-right{right:-10.5rem}.error-floating{background-color:#f44336;color:var(--color-primary);font-size:.75rem;padding:.5rem;border-radius:4px;white-space:nowrap;pointer-events:none;z-index:10;opacity:.9;box-shadow:0 2px 6px #0003}.form-popup .form-group input::placeholder{color:var(--muted);opacity:.5}.form-popup .form-group input:focus{outline:none;border-color:var(--color-pure)}.form-popup .form-submit-btn{display:flex;justify-content:center;align-items:center;font-family:inherit;background-color:var(--color-secondary);color:var(--color-primary);border:none;width:100%;padding:12px 16px;font-size:inherit;gap:8px;margin:12px 0;cursor:pointer;border-radius:6px;box-shadow:0 0 3px #00000015,0 2px 3px #0000002b}.form-popup .form-submit-btn:hover{background-color:var(--muted)}.form-popup .signup-link{align-self:center;font-weight:500}.form-popup .signup-link .link{font-weight:400}.form-popup .link:hover{text-decoration:underline}.accessibility-buttons{display:flex;flex-direction:column;align-items:center;gap:1em;margin-top:auto}.authentication-buttons{display:flex;gap:25rem;margin-bottom:2rem;z-index:2}
`],encapsulation:2})};var we=()=>import("./chunk-AIS2U2LA.js").then(e=>e.MainLayoutComponent),Ie=()=>import("./chunk-IIE77DG7.js").then(e=>e.FriendRequestPageComponent),Fe=()=>import("./chunk-MBEOVCCF.js").then(e=>e.FriendsPageComponent),Ee=()=>import("./chunk-4OUNPGAM.js").then(e=>e.FeedPageComponent),Te=()=>import("./chunk-BVCOYUUE.js").then(e=>e.ProfilePageComponent),Le=()=>import("./chunk-4XZXVUH2.js").then(e=>e.PostDetailPageComponent),Be=()=>import("./chunk-CYS25O2Z.js").then(e=>e.PageNotFoundComponent),le=[{path:"auth",component:q},{path:"",redirectTo:"/auth",pathMatch:"full"},{path:"main",loadComponent:we,children:[{path:"requests",loadComponent:Ie},{path:"friends/:id",loadComponent:Fe},{path:"feed",loadComponent:Ee},{path:"post/:id",loadComponent:Le},{path:"profile/:id",loadComponent:Te}]},{path:"**",loadComponent:Be}];var me=(()=>{class e{http;prefix;suffix;constructor(o,i="/assets/i18n/",s=".json"){this.http=o,this.prefix=i,this.suffix=s}getTranslation(o){return this.http.get(`${this.prefix}${o}${this.suffix}`)}static \u0275fac=function(i){return new(i||e)(F(T),F(String),F(String))};static \u0275prov=$({token:e,factory:e.\u0275fac})}return e})();var se=(e,n)=>{let i=O(j).getToken();if(i){let s=e.clone({headers:e.headers.set("Authorization",`Bearer ${i}`)});return console.log("\u2705 Token agregado:",s.headers.get("Authorization")),n(s)}return n(e)};var ke=e=>new me(e),de={providers:[J({eventCoalescing:!0}),te(le),W(X([se])),Z(re.forRoot({loader:{provide:ie,useFactory:ke,deps:[T]}}))]};var z=class e{title="coinapp";static \u0275fac=function(o){return new(o||e)};static \u0275cmp=C({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){o&1&&u(0,"router-outlet")},dependencies:[Y],encapsulation:2})};Q(z,de).catch(e=>console.error(e));
