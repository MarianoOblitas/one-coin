import{b as se,c as ce}from"./chunk-WH5CCBXP.js";import{a as V,b as pe}from"./chunk-X52XW5TZ.js";import{a as ae}from"./chunk-Z24TDD3R.js";import{b as re,d as ie,g as oe,m as y}from"./chunk-OYNSWCUO.js";import{a as E}from"./chunk-I5FS3M5K.js";import{a as O}from"./chunk-OMGKDOXE.js";import{a as le}from"./chunk-2LEHSMYE.js";import{d as Z,e as I,g as ee,m as te,o as ne,p as b,t as P}from"./chunk-XJFT56VC.js";import{$a as c,Da as u,Ha as g,Ma as _,Sa as f,Ua as S,Za as r,_a as o,aa as j,ab as w,ba as z,bb as k,ca as R,cb as L,fb as d,gb as C,hb as W,ib as $,ja as H,ob as l,pb as p,qb as q,rb as J,sb as K,tb as Q,v as Y,wb as v,xb as h,ya as a}from"./chunk-IDPMWJG7.js";var T=class i{constructor(n,e){this.router=n;this.authService=e}handleGoToProfile(n){let e=this.authService.getUserId();if(!e){console.error("\u274C No se puede navegar: this.authService.getUserId() es undefined",this.authService.getUserId());return}n.stopPropagation(),this.router.navigate(["/main/profile",e.replace(/^"|"$/g,"")])}static \u0275fac=function(e){return new(e||i)(u(b),u(O))};static \u0275cmp=g({type:i,selectors:[["app-sidebar"]],decls:25,vars:9,consts:[[1,"sidebar-wrapper"],["type","checkbox","id","sidebar-toggle",1,"inp"],["for","sidebar-toggle",1,"main"],[1,"bar"],[1,"top","bar-list"],[1,"middle","bar-list"],[1,"bottom","bar-list"],[1,"menu-container"],[1,"menu-list"],[1,"sidebar-route",3,"click"],[1,"menu-list","menu-extra"],[1,"theme-toggle-container"]],template:function(e,t){e&1&&(r(0,"div",0),c(1,"input",1),r(2,"label",2)(3,"div",3),c(4,"span",4)(5,"span",5)(6,"span",6),o()(),r(7,"section",7)(8,"div",8)(9,"a",9),d("click",function(m){return t.handleGoToProfile(m)}),l(10),v(11,"translate"),o()(),r(12,"div",8)(13,"a",9),d("click",function(m){return t.handleGoToProfile(m)}),l(14),v(15,"translate"),o()(),r(16,"div",10)(17,"div",11),c(18,"app-theme-toggle"),o()(),r(19,"div",10),c(20,"app-language-switcher"),o(),r(21,"div",8)(22,"a",9),d("click",function(m){return t.handleGoToProfile(m)}),l(23),v(24,"translate"),o()()()()),e&2&&(a(10),p(h(11,3,"sidebar.view")),a(4),p(h(15,5,"sidebar.edit")),a(9),p(h(24,7,"sidebar.logout")))},dependencies:[se,ce,P],styles:['.inp[_ngcontent-%COMP%]{display:none}.sidebar-wrapper[_ngcontent-%COMP%]{width:3rem;transition:width .3s ease;position:relative}.sidebar-wrapper[_ngcontent-%COMP%]:has(.inp:checked){width:12rem}.main[_ngcontent-%COMP%]{font-weight:800;color:var(--color-secondary);background-color:var(--color-primary);padding:12px;border-radius:10px;display:flex;align-items:center;height:2.5rem;position:relative;cursor:pointer;flex-direction:column;gap:.5rem;width:100%;transition:width .3s ease}.bar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3px;width:20px;height:auto}.bar-list[_ngcontent-%COMP%]{display:block;width:100%;height:3px;border-radius:50px;background-color:var(--color-secondary);transition:all .4s;position:relative;--transform: -25%}.inp[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%] > .top[_ngcontent-%COMP%]{transform-origin:top right;transform:translateY(var(--transform)) rotate(-45deg)}.inp[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%] > .middle[_ngcontent-%COMP%]{transform:translate(-50%);opacity:0}.inp[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%] > .bottom[_ngcontent-%COMP%]{transform-origin:bottom right;transform:translateY(calc(var(--transform) * -1)) rotate(45deg)}.menu-container[_ngcontent-%COMP%]{text-align:center;background-color:var(--color-primary);color:var(--color-secondary);border-radius:10px;position:absolute;width:100%;left:0;top:130%;overflow:hidden;clip-path:inset(100% 50% 0% 50% round 10px);transition:all .4s;z-index:1001}.inp[_ngcontent-%COMP%]:checked ~ .menu-container[_ngcontent-%COMP%]{clip-path:inset(0% 0% 0% 0% round 10px)}.menu-list[_ngcontent-%COMP%]{--delay: .4s;--trdelay: .15s;padding:10px;border-radius:inherit;transition:background-color .2s 0s;position:relative;transform:translateY(30px);opacity:0}.menu-extra[_ngcontent-%COMP%]{display:flex;justify-content:center}.theme-toggle-container[_ngcontent-%COMP%]{width:5rem;height:4rem;display:flex;justify-content:center;align-items:center;background-color:var(--color-secondary);border-radius:10px}.menu-list[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;transform:translate(-50%);height:1px;background-color:#0000004d;width:95%}.menu-list[_ngcontent-%COMP%]:hover{background-color:var(--muted)}.menu-list[_ngcontent-%COMP%]:active{color:var(--color-pure)}.sidebar-route[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.menu-extra[_ngcontent-%COMP%]:hover{background-color:var(--color-primary);cursor:default}.inp[_ngcontent-%COMP%]:checked ~ .menu-container[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{transform:translateY(0);opacity:1}.inp[_ngcontent-%COMP%]:checked ~ .menu-container[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]:nth-child(1){transition:transform .4s var(--delay),opacity .4s var(--delay)}.inp[_ngcontent-%COMP%]:checked ~ .menu-container[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]:nth-child(2){transition:transform .4s calc(var(--delay) + var(--trdelay)),opacity .4s calc(var(--delay) + var(--trdelay))}.inp[_ngcontent-%COMP%]:checked ~ .menu-container[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]:nth-child(3){transition:transform .4s calc(var(--delay) + var(--trdelay) * 2),opacity .4s calc(var(--delay) + var(--trdelay) * 2)}.inp[_ngcontent-%COMP%]:checked ~ .menu-container[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]:nth-child(4){transition:transform .4s calc(var(--delay) + var(--trdelay) * 3),opacity .4s calc(var(--delay) + var(--trdelay) * 3)}.inp[_ngcontent-%COMP%]:checked ~ .menu-container[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]:nth-child(5){transition:transform .4s calc(var(--delay) + var(--trdelay) * 4),opacity .4s calc(var(--delay) + var(--trdelay) * 4)}.sidebar-route[_ngcontent-%COMP%]{cursor:pointer}']})};var U=class i{constructor(n,e){this.router=n;this.authService=e}isProfileRoute=!1;navigate(n){this.router.navigate([n])}navigateToFriends(){let n=this.authService.getUserId();if(!n){console.error("\u274C No se pudo obtener el ID del usuario logueado");return}let e=n.replace(/^"|"$/g,"");this.router.navigate(["/main/friends",e])}static \u0275fac=function(e){return new(e||i)(u(b),u(O))};static \u0275cmp=g({type:i,selectors:[["app-navbar"]],decls:27,vars:12,consts:[[1,"nav-bar"],[1,"logo-container"],["src","/assets/img/logo-dark-mode.png","alt","Logo Dark",1,"logo","logo-dark"],[1,"wrap"],["hidden","","name","radio","id","rd-0","type","radio","checked","",1,"rd-0"],["for","rd-0",1,"label",2,"--index","0",3,"click"],["hidden","","name","radio","id","rd-1","type","radio",1,"rd-1"],["for","rd-1",1,"label",2,"--index","1",3,"click"],["hidden","","name","radio","id","rd-2","type","radio",1,"rd-2"],["for","rd-2",1,"label",2,"--index","2",3,"click"],["hidden","","name","radio","id","rd-3","type","radio",1,"rd-3"],["for","rd-3",1,"label",2,"--index","3",3,"click"],[1,"bar"],[1,"slidebar"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1),c(2,"img",2),o(),r(3,"div",3),c(4,"input",4),r(5,"label",5),d("click",function(){return t.navigate("/main")}),r(6,"span"),l(7),v(8,"translate"),o()(),c(9,"input",6),r(10,"label",7),d("click",function(){return t.navigate("/main/feed")}),r(11,"span"),l(12),v(13,"translate"),o()(),c(14,"input",8),r(15,"label",9),d("click",function(){return t.navigateToFriends()}),r(16,"span"),l(17),v(18,"translate"),o()(),c(19,"input",10),r(20,"label",11),d("click",function(){return t.navigate("/main/requests")}),r(21,"span"),l(22),v(23,"translate"),o()(),c(24,"div",12)(25,"div",13),o(),c(26,"app-sidebar"),o()),e&2&&(a(7),p(h(8,4,"navbar.home")),a(5),p(h(13,6,"navbar.feed")),a(5),p(h(18,8,"navbar.friends")),a(5),p(h(23,10,"navbar.requests")))},dependencies:[T,P],styles:['.nav-bar[_ngcontent-%COMP%]{background-color:var(--color-secondary);width:100%;height:12vh;display:flex;align-items:center;justify-content:space-between;padding:0 2%}.wrap[_ngcontent-%COMP%]{--round: 10px;--p-x: 8px;--p-y: 4px;--w-label: 100px;display:flex;align-items:center;padding:var(--p-y) var(--p-x);position:relative;background:var(--color-primary);border-radius:var(--round);max-width:100%;overflow-x:auto;scrollbar-width:none;-webkit-overflow-scrolling:touch;z-index:1}.logo-container[_ngcontent-%COMP%]{width:6vw;height:6vw}.logo[_ngcontent-%COMP%]{width:100%}.wrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:0;width:0;position:absolute;overflow:hidden;display:none;visibility:hidden}.label[_ngcontent-%COMP%]{cursor:pointer;outline:none;font-size:.875rem;letter-spacing:initial;font-weight:500;color:var(--color-secondary);background:transparent;padding:12px 16px;width:var(--w-label);min-width:var(--w-label);text-decoration:none;-webkit-user-select:none;user-select:none;transition:color .25s ease;outline-offset:-6px;display:flex;align-items:center;justify-content:center;position:relative;z-index:2;-webkit-tap-highlight-color:transparent}.label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.wrap[_ngcontent-%COMP%]   input[class*=rd-][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:var(--color-pure)}.bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-shrink:0;position:absolute;transform-origin:0 0 0;height:100%;width:var(--w-label);z-index:0;transition:transform .5s cubic-bezier(.33,.83,.99,.98)}.bar[_ngcontent-%COMP%]:before, .bar[_ngcontent-%COMP%]:after{content:"";position:absolute;height:4px;width:100%;background:var(--color-secondary)}.bar[_ngcontent-%COMP%]:before{top:0;border-radius:0 0 9999px 9999px}.bar[_ngcontent-%COMP%]:after{bottom:0;border-radius:9999px 9999px 0 0}.slidebar[_ngcontent-%COMP%]{position:absolute;height:calc(100% - (var(--p-y) * 4));width:var(--w-label);border-radius:calc(var(--round) - var(--p-y));background:var(--muted);transform-origin:0 0 0;z-index:0;transition:transform .5s cubic-bezier(.33,.83,.99,.98)}.rd-0[_ngcontent-%COMP%]:checked ~ .bar[_ngcontent-%COMP%], .rd-0[_ngcontent-%COMP%]:checked ~ .slidebar[_ngcontent-%COMP%], .rd-0[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover ~ .slidebar[_ngcontent-%COMP%]{transform:translate(0) scaleX(1)}.rd-1[_ngcontent-%COMP%]:checked ~ .bar[_ngcontent-%COMP%], .rd-1[_ngcontent-%COMP%]:checked ~ .slidebar[_ngcontent-%COMP%], .rd-1[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover ~ .slidebar[_ngcontent-%COMP%]{transform:translate(100%) scaleX(1)}.rd-2[_ngcontent-%COMP%]:checked ~ .bar[_ngcontent-%COMP%], .rd-2[_ngcontent-%COMP%]:checked ~ .slidebar[_ngcontent-%COMP%], .rd-2[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover ~ .slidebar[_ngcontent-%COMP%]{transform:translate(200%) scaleX(1)}.rd-3[_ngcontent-%COMP%]:checked ~ .bar[_ngcontent-%COMP%], .rd-3[_ngcontent-%COMP%]:checked ~ .slidebar[_ngcontent-%COMP%], .rd-3[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover ~ .slidebar[_ngcontent-%COMP%]{transform:translate(300%) scaleX(1)}']})};var A=class i{constructor(n){this.router=n}username;email;message;messageType;sentAt;handleGoToProfile(n){n.stopPropagation(),this.router.navigate(["/main/profile"])}static \u0275fac=function(e){return new(e||i)(u(b))};static \u0275cmp=g({type:i,selectors:[["app-chat-list"]],inputs:{username:"username",email:"email",message:"message",messageType:"messageType",sentAt:"sentAt"},decls:12,vars:6,consts:[[1,"chat-card"],[3,"click"],[1,"chat-info"],[1,"chat-header"],[1,"username"],[1,"email"],[1,"timestamp"],[1,"chat-message"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"app-avatar",1),d("click",function(m){return t.handleGoToProfile(m)}),o(),r(2,"div",2)(3,"div",3)(4,"span",4),l(5),o(),r(6,"span",5),l(7),o(),r(8,"span",6),l(9),o()(),r(10,"div",7),l(11),o()()()),e&2&&(a(5),p(t.username),a(2),p(t.email),a(2),p(t.sentAt),a(),S("sent",t.messageType==="sent"),a(),q(" ",t.message," "))},dependencies:[le],styles:['.chat-card[_ngcontent-%COMP%]{display:flex;gap:12px;padding:12px;border-bottom:1px solid var(--muted);cursor:pointer;transition:background-color .2s}.chat-card[_ngcontent-%COMP%]:hover{background-color:#0000000d}.chat-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.chat-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:4px;flex-wrap:wrap}.username[_ngcontent-%COMP%]{font-weight:600;color:var(--color-pure2)}.email[_ngcontent-%COMP%]{font-size:.85rem;color:var(--muted)}.timestamp[_ngcontent-%COMP%]{margin-left:auto;font-size:.8rem;color:var(--muted)}.chat-message[_ngcontent-%COMP%]{color:var(--color-pure2);font-size:.95rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}.chat-message.sent[_ngcontent-%COMP%]:before{content:"T\\fa: ";font-weight:600;color:var(--muted)}']})};var ge=["*"],B=class i{currentUser;conversation;onBack;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=g({type:i,selectors:[["app-chat-box"]],inputs:{currentUser:"currentUser",conversation:"conversation",onBack:"onBack"},ngContentSelectors:ge,decls:10,vars:2,consts:[[1,"chat-box-wrapper"],[1,"chat-header"],["type","goback",3,"click"],[1,"user-info"],[1,"username"],[1,"email"],[1,"wasa"]],template:function(e,t){e&1&&(W(),r(0,"div",0)(1,"div",1)(2,"app-icon-button",2),d("click",function(){return t.onBack()}),o(),r(3,"div",3)(4,"div",4),l(5),o(),r(6,"div",5),l(7),o()()(),r(8,"div",6),$(9),o()()),e&2&&(a(5),p(t.conversation.user.username),a(2),p(t.conversation.user.email))},dependencies:[E,y],styles:[".chat-box-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:var(--color-secondary);color:var(--color-pure2);border-radius:10px;overflow:hidden}.chat-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;border-bottom:1px solid var(--muted);background-color:var(--color-secondary)}.user-info[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-weight:700}.user-info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--muted);font-size:.9rem}"]})};var N=class i{text;sentAt;type;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=g({type:i,selectors:[["app-message-bubble"]],inputs:{text:"text",sentAt:"sentAt",type:"type"},decls:5,vars:4,consts:[[1,"message"],[1,"text"],[1,"timestamp"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1),l(2),o(),r(3,"div",2),l(4),o()()),e&2&&(S("sent",t.type==="sent"),a(2),p(t.text),a(2),p(t.sentAt))},dependencies:[ee],styles:[".message[_ngcontent-%COMP%]{max-width:70%;padding:.6rem 1rem;background-color:var(--muted);border-radius:15px;align-self:flex-start;color:var(--color-pure2)}.message.sent[_ngcontent-%COMP%]{background-color:var(--color-primary);align-self:flex-end;color:var(--color-secondary)}.timestamp[_ngcontent-%COMP%]{font-size:.7rem;margin-top:.2rem;color:var(--muted);text-align:right}"]})};var D=class i{messageContent="";sendMessage=new H;handleSend(){this.messageContent.trim()&&(this.sendMessage.emit(this.messageContent.trim()),this.messageContent="")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=g({type:i,selectors:[["app-message-form"]],outputs:{sendMessage:"sendMessage"},decls:4,vars:1,consts:[[1,"chat-input"],["type","image"],["placeholder","Escribe un mensaje...","type","text",1,"input-field",3,"ngModelChange","keydown.enter","ngModel"],["type","send",3,"click"]],template:function(e,t){e&1&&(r(0,"div",0),c(1,"app-icon-button",1),r(2,"input",2),Q("ngModelChange",function(m){return K(t.messageContent,m)||(t.messageContent=m),m}),d("keydown.enter",function(){return t.handleSend()}),o(),r(3,"app-icon-button",3),d("click",function(){return t.handleSend()}),o()()),e&2&&(a(2),J("ngModel",t.messageContent))},dependencies:[E,y,re,ie,oe],styles:[".chat-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.8rem 1rem;border-top:1px solid var(--muted);background-color:var(--color-secondary)}.input-field[_ngcontent-%COMP%]{flex:1;padding:.6rem 1rem;border-radius:20px;border:none;background-color:var(--muted);color:var(--color-pure2)}.input-field[_ngcontent-%COMP%]::placeholder{color:var(--color-pure)}"]})};function ue(i,n){i&1&&(w(0),R(),r(1,"svg",6),c(2,"path",7)(3,"path",8),o(),k())}function fe(i,n){i&1&&(w(0),R(),r(1,"svg",6),c(2,"path",9),o(),k())}function ve(i,n){if(i&1){let e=L();r(0,"div",11),d("click",function(){let s=j(e).$implicit,m=C(2);return z(m.handleChatClick(s))}),c(1,"app-chat-list",12),o()}if(i&2){let e=n.$implicit,t=C(2);a(),f("username",e.user.username)("email",e.user.email)("message",e.lastMessage.content)("messageType",e.lastMessage.sender._id===t.currentUser._id?"sent":"received")("sentAt",e.lastMessage.sentAt)}}function he(i,n){if(i&1&&(w(0),_(1,ve,2,5,"div",10),k()),i&2){let e=C();a(),f("ngForOf",e.chats)}}function _e(i,n){if(i&1&&c(0,"app-message-bubble",18),i&2){let e=n.$implicit,t=C(3);f("text",e.content)("sentAt",e.sentAt)("type",e.sender._id===t.currentUser._id?"sent":"received")}}function Ce(i,n){if(i&1){let e=L();r(0,"app-chat-box",14)(1,"div",15),_(2,_e,1,3,"app-message-bubble",16),o(),r(3,"app-message-form",17),d("sendMessage",function(s){j(e);let m=C(2);return z(m.handleSendMessage(s))}),o()()}if(i&2){let e=C(2);f("currentUser",e.currentUser)("conversation",e.selectedChat)("onBack",e.handleBack),a(2),f("ngForOf",e.selectedChat.messages)}}function be(i,n){if(i&1&&(w(0),_(1,Ce,4,4,"app-chat-box",13),k()),i&2){let e=C();a(),f("ngIf",e.selectedChat)}}var F=class i{constructor(n,e,t){this.messageService=n;this.authService=e;this.userService=t}selectedChat=null;currentUser;chats=[];ngOnInit(){let n=this.authService.getUserId();n&&this.userService.getById(n).subscribe({next:e=>{this.currentUser=e,this.loadAllMessages()},error:e=>console.error("\u274C Error al cargar usuario logueado",e)})}toggleChecked(){return document.getElementById("messaging-panel-toggle")?.checked??!1}handleChatClick(n){let e=n.user;!this.currentUser?._id||!e._id||this.messageService.getConversation(this.currentUser._id,e._id).subscribe({next:t=>{this.selectedChat={user:e,messages:t}},error:t=>console.error("\u274C Error al obtener conversaci\xF3n",t)})}handleBack=()=>{this.selectedChat=null};handleSendMessage(n){if(!this.selectedChat||!this.currentUser)return;let e=this.selectedChat.user,t=new V({sender:{_id:this.currentUser._id,username:this.currentUser.username,email:this.currentUser.email},recipient:{_id:e._id,username:e.username,email:e.email},content:n});this.messageService.create(t).subscribe({next:s=>{this.selectedChat?.messages.push(new V(s))},error:s=>console.error("\u274C Error al enviar mensajee",s)})}loadAllMessages(){this.messageService.getAll().subscribe({next:n=>{let e=new Map;n.forEach(t=>{let m=(t.sender._id===this.currentUser._id?t.recipient:t.sender)._id,X=e.get(m);e.set(m,t),(!X||new Date(t.sentAt)>new Date(X.sentAt))&&e.set(m,t)}),this.chats=Array.from(e.entries()).map(([t,s])=>({user:s.sender._id===this.currentUser._id?s.recipient:s.sender,lastMessage:s}))},error:n=>console.error("\u274C Error al cargar mensajes",n)})}static \u0275fac=function(e){return new(e||i)(u(pe),u(O),u(ae))};static \u0275cmp=g({type:i,selectors:[["app-messaging-panel"]],decls:9,vars:4,consts:[[1,"messaging-panel-container"],[1,"messaging-panel-wrapper"],["type","checkbox","id","messaging-panel-toggle",1,"input"],["for","messaging-panel-toggle",1,"press"],[4,"ngIf"],[1,"messaging-container"],["viewBox","0 0 24 24",1,"icon"],["fill","currentColor","d","M12 13l-8-5v10h16V8z"],["fill","currentColor","d","M4 6l8 5 8-5H4z"],["fill","currentColor","d","M19 3H5a2 2 0 00-2 2v14l4-4h12a2 2 0 002-2V5a2 2 0 00-2-2z"],["class","chat-click-wrapper",3,"click",4,"ngFor","ngForOf"],[1,"chat-click-wrapper",3,"click"],[3,"username","email","message","messageType","sentAt"],[3,"currentUser","conversation","onBack",4,"ngIf"],[3,"currentUser","conversation","onBack"],[1,"chat-messages"],[3,"text","sentAt","type",4,"ngFor","ngForOf"],[3,"sendMessage"],[3,"text","sentAt","type"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1),c(2,"input",2),r(3,"label",3),_(4,ue,4,0,"ng-container",4)(5,fe,3,0,"ng-container",4),o(),r(6,"section",5),_(7,he,2,1,"ng-container",4)(8,be,2,1,"ng-container",4),o()()()),e&2&&(a(4),f("ngIf",!t.toggleChecked()),a(),f("ngIf",t.toggleChecked()),a(2),f("ngIf",!t.selectedChat),a(),f("ngIf",t.selectedChat))},dependencies:[I,Z,y,A,B,N,D],styles:[".input[_ngcontent-%COMP%]{display:none}.messaging-panel-container[_ngcontent-%COMP%]{position:fixed;right:1%;top:50%;z-index:1000}.messaging-panel-wrapper[_ngcontent-%COMP%]{position:relative}.press[_ngcontent-%COMP%]{width:3rem;height:3rem;background-color:var(--color-primary);color:var(--color-secondary);border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;transition:background-color .3s ease;box-shadow:0 4px 12px #0003}.press[_ngcontent-%COMP%]:hover{background-color:var(--muted)}.icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.messaging-container[_ngcontent-%COMP%]{position:absolute;right:3.5rem;bottom:-17rem;width:30vw;min-width:300px;height:70vh;background-color:var(--color-secondary);color:var(--color-primary);border-radius:15px;box-shadow:0 4px 18px var(--color-pure2);transform:scale(0);transform-origin:right center;transition:transform .3s ease;overflow:hidden;display:flex;flex-direction:column;justify-content:center;align-items:center}.input[_ngcontent-%COMP%]:checked ~ .messaging-container[_ngcontent-%COMP%]{transform:scale(1)}.placeholder-text[_ngcontent-%COMP%]{padding:1rem;text-align:center;font-weight:600;opacity:.8}.chat-messages[_ngcontent-%COMP%]{flex:1;padding:1rem;display:flex;flex-direction:column-reverse;gap:.75rem;overflow-y:scroll;height:50vh}"]})};function Me(i,n){i&1&&(r(0,"div",2)(1,"h1"),l(2),v(3,"translate"),o(),r(4,"p"),l(5),v(6,"translate"),o()()),i&2&&(a(2),p(h(3,2,"welcome.title")),a(3),p(h(6,4,"welcome.message")))}var de=class i{constructor(n){this.router=n}isMainPage=!1;username="";ngOnInit(){this.isMainPage=this.router.url==="/main",this.router.events.pipe(Y(n=>n instanceof te)).subscribe(n=>{this.isMainPage=n.urlAfterRedirects==="/main"})}static \u0275fac=function(e){return new(e||i)(u(b))};static \u0275cmp=g({type:i,selectors:[["app-main-layout"]],decls:5,vars:1,consts:[[1,"main-container"],["class","welcome-message",4,"ngIf"],[1,"welcome-message"]],template:function(e,t){e&1&&(c(0,"app-navbar"),r(1,"main",0),_(2,Me,7,6,"div",1),c(3,"router-outlet")(4,"app-messaging-panel"),o()),e&2&&(a(2),f("ngIf",t.isMainPage))},dependencies:[U,ne,I,F,P],styles:[`body{padding-top:1vh}.main-container{width:94vw;height:88vh;border:1px solid var(--color-primary);overflow-y:auto}.welcome-message{text-align:center;color:var(--color-pure2)}
`],encapsulation:2})};export{de as MainLayoutComponent};
